<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Git Update Checker</title>
    <style>
        body {
            font-family: monospace;
            padding: 1em;
        }

        #sha {
            color: #888;
            font-size: 0.9em;
        }
    </style>
</head>

<body>
    <h1>ğŸ” Git Repo Update Checker</h1>
    <p id="status">Checking for updates...</p>
    <p id="sha"></p>

    <script>
        const owner = "SirPigari"; // ğŸ‘ˆ Replace this
        const repo = "miku";        // ğŸ‘ˆ Replace this
        const branch = "main";                // e.g., "main" or "master"

        const statusEl = document.getElementById("status");
        const shaEl = document.getElementById("sha");

        async function checkGitUpdate() {
            try {
                const url = `https://api.github.com/repos/${owner}/${repo}/commits/${branch}`;
                const response = await fetch(url);
                const data = await response.json();
                const latestCommitSha = data.sha;

                const storedCommitSha = localStorage.getItem("latestCommit");

                shaEl.textContent = `ğŸ“¦ Latest remote SHA: ${latestCommitSha}`;

                if (!storedCommitSha) {
                    localStorage.setItem("latestCommit", latestCommitSha);
                    statusEl.textContent = "ğŸŒ¸ First time setup. Stored the latest commit hash!";
                } else if (storedCommitSha !== latestCommitSha) {
                    statusEl.textContent = "ğŸš¨ New update detected on the remote repo, uwu!";
                } else {
                    statusEl.textContent = "âœ… Your code is up to date, nya~";
                }
            } catch (e) {
                statusEl.textContent = "âŒ Failed to check for updates: " + e.message;
                shaEl.textContent = "";
            }
        }

        // Run the check immediately and every 60 seconds
        checkGitUpdate();
        setInterval(checkGitUpdate, 60000);
    </script>
</body>

</html>